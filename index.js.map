{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport const createGallery = images => {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <div class=\"image-card\">\n      <a href=\"${largeImageURL}\" target=\"_blank\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <div class=\"card-info\">\n        <span><strong>Likes</strong><br>${likes}</span>\n        <span><strong>Views</strong><br>${views}</span>\n        <span><strong>Comments</strong><br>${comments}</span>\n        <span><strong>Downloads</strong><br>${downloads}</span>\n      </div>\n    </div>\n  `\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n  galleryContainer.innerHTML = '';\n};\n\nconst loader = document.querySelector('.loader');\nexport const showLoader = () => {\n  loader.style.display = 'flex';\n};\nexport const hideLoader = () => {\n  loader.style.display = 'none';\n};\n\nexport const loadMoreBtn = document.querySelector('.btn-load-more');\nexport const showLoadBtn = () => {\n  loadMoreBtn.style.display = 'flex';\n};\nexport const hideLoadBtn = () => {\n  loadMoreBtn.style.display = 'none';\n};\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { showLoadBtn } from './render-functions';\n\nlet page = 1;\nconst perPage = 15;\n\nexport const resetPage = () => {\n  page = 1;\n};\n\nexport const getImagesByQuery = async query => {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '50285738-1ed6c89d653294dbf28cfa2b7',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n\n    const hits = response.data.hits;\n\n    if (hits.length === 0) {\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return [];\n    }\n\n    if (page > 1) {\n      showLoadBtn();\n    }\n\n    page += 1;\n    return hits;\n  } catch (error) {\n    console.log('The server did not return any images:', error);\n    return [];\n  }\n};\n","import { getImagesByQuery, resetPage } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadBtn,\n  hideLoadBtn,\n  loadMoreBtn,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nlet currentQuery = '';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const searchValue = e.currentTarget.elements['search-text'].value.trim();\n  if (!searchValue) {\n    iziToast.warning({\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentQuery = searchValue;\n  resetPage();\n  clearGallery();\n  hideLoadBtn();\n  showLoader();\n\n  try {\n    const images = await getImagesByQuery(currentQuery);\n    createGallery(images);\n    if (images.length === 15) {\n      showLoadBtn();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong while fetching images!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoader();\n\n  try {\n    const images = await getImagesByQuery(currentQuery);\n    createGallery(images);\n    if (images.length < 15) {\n      hideLoadBtn();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Failed to load more images!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["galleryContainer","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","loader","showLoader","hideLoader","loadMoreBtn","showLoadBtn","hideLoadBtn","page","perPage","resetPage","getImagesByQuery","query","hits","axios","iziToast","error","form","currentQuery","e","searchValue"],"mappings":"owBAGA,MAAMA,EAAmB,SAAS,cAAc,UAAU,EAE1D,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAEvC,MAAMC,EAAgBC,GAAU,CACrC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,iBAEKL,CAAa;AAAA,oBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,0CAGJC,CAAK;AAAA,0CACLC,CAAK;AAAA,6CACFC,CAAQ;AAAA,8CACPC,CAAS;AAAA;AAAA;AAAA,GAIlD,EACA,KAAK,EAAE,EAEVZ,EAAiB,mBAAmB,YAAaK,CAAM,EACvDJ,EAAS,QAAO,CAClB,EAEaY,EAAe,IAAM,CAChCb,EAAiB,UAAY,EAC/B,EAEMc,EAAS,SAAS,cAAc,SAAS,EAClCC,EAAa,IAAM,CAC9BD,EAAO,MAAM,QAAU,MACzB,EACaE,EAAa,IAAM,CAC9BF,EAAO,MAAM,QAAU,MACzB,EAEaG,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,IAAM,CAC/BD,EAAY,MAAM,QAAU,MAC9B,EACaE,EAAc,IAAM,CAC/BF,EAAY,MAAM,QAAU,MAC9B,ECnDA,IAAIG,EAAO,EACX,MAAMC,EAAU,GAEHC,EAAY,IAAM,CAC7BF,EAAO,CACT,EAEaG,EAAmB,MAAMC,GAAS,CAC7C,GAAI,CAaF,MAAMC,GAZW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAJ,EACA,SAAUC,CACX,CACP,CAAK,GAEqB,KAAK,KAE3B,OAAII,EAAK,SAAW,GAClBE,EAAS,QAAQ,CACf,QACE,2EACF,SAAU,UAClB,CAAO,EACM,KAGLP,EAAO,GACTF,IAGFE,GAAQ,EACDK,EACR,OAAQG,EAAO,CACd,eAAQ,IAAI,wCAAyCA,CAAK,EACnD,EACR,CACH,EClCMC,EAAO,SAAS,cAAc,OAAO,EAC3C,IAAIC,EAAe,GAEnBD,EAAK,iBAAiB,SAAU,MAAME,GAAK,CACzCA,EAAE,eAAc,EAEhB,MAAMC,EAAcD,EAAE,cAAc,SAAS,aAAa,EAAE,MAAM,OAClE,GAAI,CAACC,EAAa,CAChBL,EAAS,QAAQ,CACf,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDG,EAAeE,EACfV,IACAT,IACAM,IACAJ,IAEA,GAAI,CACF,MAAMX,EAAS,MAAMmB,EAAiBO,CAAY,EAClD3B,EAAcC,CAAM,EAChBA,EAAO,SAAW,IACpBc,GAEH,MAAe,CACdS,EAAS,MAAM,CACb,QAAS,8CACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRX,GACD,CACH,CAAC,EAEDC,EAAY,iBAAiB,QAAS,SAAY,CAChDF,IAEA,GAAI,CACF,MAAMX,EAAS,MAAMmB,EAAiBO,CAAY,EAClD3B,EAAcC,CAAM,EAChBA,EAAO,OAAS,IAClBe,GAEH,MAAe,CACdQ,EAAS,MAAM,CACb,QAAS,8BACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRX,GACD,CACH,CAAC"}