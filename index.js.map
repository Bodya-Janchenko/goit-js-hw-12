{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst perPage = 15;\n\nexport const getImagesByQuery = async (query, page = 1) => {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '50285738-1ed6c89d653294dbf28cfa2b7',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    iziToast.error({\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport const createGallery = images => {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <div class=\"image-card\">\n      <a href=\"${largeImageURL}\" target=\"_blank\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <div class=\"card-info\">\n        <span><strong>Likes</strong><br>${likes}</span>\n        <span><strong>Views</strong><br>${views}</span>\n        <span><strong>Comments</strong><br>${comments}</span>\n        <span><strong>Downloads</strong><br>${downloads}</span>\n      </div>\n    </div>\n  `\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n  galleryContainer.innerHTML = '';\n};\n\nconst loader = document.querySelector('.loader');\nexport const showLoader = () => {\n  loader.style.display = 'flex';\n};\nexport const hideLoader = () => {\n  loader.style.display = 'none';\n};\n\nexport const loadMoreBtn = document.querySelector('.btn-load-more');\nexport const showLoadBtn = () => {\n  loadMoreBtn.style.display = 'flex';\n};\nexport const hideLoadBtn = () => {\n  loadMoreBtn.style.display = 'none';\n};\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadBtn,\n  hideLoadBtn,\n  loadMoreBtn,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nlet currentQuery = '';\nlet currentPage;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const searchValue = e.currentTarget.elements['search-text'].value.trim();\n  if (!searchValue) {\n    iziToast.warning({\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentQuery = searchValue;\n  currentPage = 1;\n\n  clearGallery();\n  hideLoadBtn();\n  showLoader();\n\n  try {\n    const { hits, totalHits } = await getImagesByQuery(\n      currentQuery,\n      currentPage\n    );\n\n    if (hits.length === 0) {\n      iziToast.info({\n        message: 'No images found for your query.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(hits);\n    const imageEl = document.querySelector('.image-card');\n    if (imageEl) {\n      const rect = imageEl.getBoundingClientRect();\n      const scrollOffset = rect.height * 2;\n\n      window.scrollBy({\n        top: scrollOffset,\n        behavior: 'smooth',\n      });\n    }\n\n    if (document.querySelectorAll('.image-card').length < totalHits) {\n      showLoadBtn();\n    } else {\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Failed to fetch images!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoader();\n\n  try {\n    currentPage += 1;\n    const { hits, totalHits } = await getImagesByQuery(\n      currentQuery,\n      currentPage\n    );\n\n    createGallery(hits);\n    const imageEl = document.querySelector('.image-card');\n    if (imageEl) {\n      const rect = imageEl.getBoundingClientRect();\n      const scrollOffset = rect.height * 2;\n\n      window.scrollBy({\n        top: scrollOffset,\n        behavior: 'smooth',\n      });\n    }\n\n    const totalShown = document.querySelectorAll('.image-card').length;\n    if (totalShown >= totalHits) {\n      hideLoadBtn();\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Failed to load more images!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["perPage","getImagesByQuery","query","page","response","axios","iziToast","galleryContainer","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","loader","showLoader","hideLoader","loadMoreBtn","showLoadBtn","hideLoadBtn","form","currentQuery","currentPage","e","searchValue","hits","totalHits","imageEl","scrollOffset"],"mappings":"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"}